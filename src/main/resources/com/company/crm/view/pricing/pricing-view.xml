<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://pricingView.title">
    <data>
        <collection id="categoryItemsDc"
                    class="com.company.crm.model.catalog.item.CategoryItem">
            <fetchPlan extends="_base">
                <property name="category" fetchPlan="_base"/>
            </fetchPlan>
            <loader id="categoryItemsDl" readOnly="true"/>
        </collection>
    </data>
    <facets>
        <settings auto="true"/>
        <dataLoadCoordinator auto="true"/>
        <urlQueryParameters/>
    </facets>
    <layout>
        <hbox width="100%">
            <startSlot>
                <textField id="items_searchField" width="100%" maxWidth="26em"
                           placeholder="msg:///searchField.placeholder" clearButtonVisible="true">
                    <prefix>
                        <icon icon="SEARCH"/>
                    </prefix>
                </textField>
            </startSlot>
            <endSlot>
                <span id="currentVatValue" themeNames="badge contrast" classNames="mt-auto mb-auto mr-xl"/>
            </endSlot>
        </hbox>
        <hbox id="buttonsPanel" classNames="buttons-panel">
            <startSlot>
                <button id="updateFromXlsButton" action="categoryItemsDataGrid.updateFromXls" themeNames="contrast"/>
                <button id="downloadXlsButton" action="categoryItemsDataGrid.downloadXls" themeNames="contrast"/>
                <button id="changeVatButton" action="categoryItemsDataGrid.changeVat" themeNames="contrast"/>
            </startSlot>
            <endSlot>
                <simplePagination id="items_pagination" dataLoader="categoryItemsDl"/>
                <gridColumnVisibility dataGrid="categoryItemsDataGrid" icon="COG_O"
                                      themeNames="tertiary-inline" hideAllEnabled="false"/>
            </endSlot>
        </hbox>
        <dataGrid id="categoryItemsDataGrid"
                  width="100%"
                  minHeight="20em"
                  dataContainer="categoryItemsDc"
                  multiSort="true"
                  columnReorderingAllowed="true">
            <actions>
                <action id="updateFromXls" text="msg://updateFromXls" icon="vaadin:table"/>
                <action id="downloadXls" text="msg://downloadXls" icon="DOWNLOAD_ALT"/>
                <action id="changeVat" text="msg://changeVat" icon="PENCIL"/>
            </actions>
            <columns resizable="true" sortable="true">
                <column property="name" filterable="true"/>
                <column property="code" filterable="true"/>
                <column property="price" filterable="true"/>
                <column property="category.code" filterable="true"
                        header="msg://com.company.crm.model.catalog.category/Category"/>
            </columns>
        </dataGrid>
    </layout>
</view>